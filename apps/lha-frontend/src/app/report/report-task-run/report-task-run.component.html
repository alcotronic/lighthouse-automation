<div class="report-task-run-container">
  <h1>
    Report Task Run
  </h1>
  <div *ngIf="!!task && task !== undefined && !!taskRun && taskRun !== undefined">
    <mat-card>
      <mat-card-title class="purple bold">
        {{task.name}}
      </mat-card-title>
      <mat-card-header>
        <mat-card-subtitle>
          <span style="color:cyan;">Id: </span>{{task._id}} |
          <span style="color:cyan;">Type: </span>{{task.reportType}} |
          <span *ngIf="task.taskInterval"><span style="color:cyan;">Interval: </span>{{task.taskInterval}} | </span>
          <span style="color:cyan;">Enabled: </span>{{task.enabled}}
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-card-subtitle class="purple bold">Report Task Run</mat-card-subtitle>
      </mat-card-content>
      <mat-card-header>
        <mat-card-subtitle>
          <span><span style="color:cyan;">Id: </span>{{taskRun._id}} | </span>
          <span style="color:cyan;">Date: </span>{{taskRun.timestamp | date:'medium':'+0100':'de'}}
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-card-subtitle class="purple bold">Desktop averege</mat-card-subtitle>
      </mat-card-content>
      <mat-card-header>
        <mat-card-subtitle>
          <span *ngIf="taskRun.performanceScoreDesktop"><span style="color:cyan;">Performance: </span>{{taskRun.performanceScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskRun.accessibilityScoreDesktop"><span style="color:cyan;">Accessibility: </span>{{taskRun.accessibilityScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskRun.bestPracticeScoreDesktop"><span style="color:cyan;">Best Practice: </span>{{taskRun.bestPracticeScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskRun.seoScoreDesktop"><span style="color:cyan;">SEO: </span>{{taskRun.seoScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskRun.pwaScoreDesktop"><span style="color:cyan;">PWA: </span>{{taskRun.pwaScoreDesktop * 100 | number: '1.0-0'}}</span>
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-card-subtitle class="purple bold">Mobile averege</mat-card-subtitle>
      </mat-card-content>
      <mat-card-header>
        <mat-card-subtitle>
          <span *ngIf="taskRun.performanceScoreMobile"><span style="color:cyan;">Performance: </span>{{taskRun.performanceScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskRun.accessibilityScoreMobile"><span style="color:cyan;">Accessibility: </span>{{taskRun.accessibilityScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskRun.bestPracticeScoreMobile"><span style="color:cyan;">Best Practice: </span>{{taskRun.bestPracticeScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskRun.seoScoreMobile"><span style="color:cyan;">SEO: </span>{{taskRun.seoScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskRun.pwaScoreMobile"><span style="color:cyan;">PWA: </span>{{taskRun.pwaScoreMobile * 100 | number: '1.0-0'}}</span>
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content >
        <button class="nopaddingleft" (click)="toggleShowUrls()">
          <mat-card-subtitle class="flextitle purple bold">
            <span>Test Urls</span>
            <span class="spacer"></span>
            <mat-icon *ngIf="!showUrls">keyboard_arrow_down</mat-icon>
            <mat-icon *ngIf="showUrls">keyboard_arrow_up</mat-icon>
          </mat-card-subtitle>
        </button>
        <mat-list dense *ngIf="showUrls">
          <mat-list-item *ngFor="let url of task.urlList">{{url}}</mat-list-item>
        </mat-list>
      </mat-card-content>
      <mat-card-content>
        <button class="nopaddingleft" (click)="toggleShowJobs()">
          <mat-card-subtitle class="flextitle purple bold">
            <span>Report Task Jobs</span>
            <span class="spacer"></span>
            <mat-icon *ngIf="!showJobs">keyboard_arrow_down</mat-icon>
            <mat-icon *ngIf="showJobs">keyboard_arrow_up</mat-icon>
          </mat-card-subtitle>
        </button>
        <lha-app-report-task-job-list *ngIf="showJobs" [taskRunId]="taskRun._id"></lha-app-report-task-job-list>
      </mat-card-content>
  </mat-card>
  </div>
</div>
