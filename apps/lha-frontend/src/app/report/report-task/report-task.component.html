<div class="report-task-container">
  <h1>
    Report Task
  </h1>
  <div *ngIf="!!reportTask && reportTask !== undefined">
    <mat-card>
      <mat-card-title class="purple bold">
        {{reportTask.name}}
      </mat-card-title>
      <mat-card-header>
        <mat-card-subtitle>
          <span style="color:cyan;">Id: </span>{{reportTask._id}} |
          <span style="color:cyan;">Type: </span>{{reportTask.reportType}} |
          <span *ngIf="reportTask.reportTaskInterval"><span style="color:cyan;">Interval: </span>{{reportTask.reportTaskInterval}} | </span>
          <span style="color:cyan;">Enabled: </span>{{reportTask.enabled}}
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-header>
        <div style="display: block; height:250px;">
          <canvas style="height:250px;" baseChart [datasets]="barChartData" [labels]="barChartLabels" [options]="barChartOptions"
            [legend]="barChartLegend" [type]="barChartType" (chartHover)="chartHovered()"
            (chartClick)="chartClicked()"></canvas>
        </div>
      </mat-card-header>
      <mat-card-content>
        <mat-card-subtitle class="purple bold">Desktop averege</mat-card-subtitle>
      </mat-card-content>
      <mat-card-header>
        <mat-card-subtitle>
          <span *ngIf="reportTask.performanceScoreDesktop"><span style="color:cyan;">Performance: </span>{{reportTask.performanceScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="reportTask.accessibilityScoreDesktop"><span style="color:cyan;">Accessibility: </span>{{reportTask.accessibilityScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="reportTask.bestPracticeScoreDesktop"><span style="color:cyan;">Best Practice: </span>{{reportTask.bestPracticeScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="reportTask.seoScoreDesktop"><span style="color:cyan;">SEO: </span>{{reportTask.seoScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="reportTask.pwaScoreDesktop"><span style="color:cyan;">PWA: </span>{{reportTask.pwaScoreDesktop * 100 | number: '1.0-0'}}</span>
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <mat-card-subtitle class="purple bold">Mobile averege</mat-card-subtitle>
      </mat-card-content>
      <mat-card-header>
        <mat-card-subtitle>
          <span *ngIf="reportTask.performanceScoreMobile"><span style="color:cyan;">Performance: </span>{{reportTask.performanceScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="reportTask.accessibilityScoreMobile"><span style="color:cyan;">Accessibility: </span>{{reportTask.accessibilityScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="reportTask.bestPracticeScoreMobile"><span style="color:cyan;">Best Practice: </span>{{reportTask.bestPracticeScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="reportTask.seoScoreMobile"><span style="color:cyan;">SEO: </span>{{reportTask.seoScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="reportTask.pwaScoreMobile"><span style="color:cyan;">PWA: </span>{{reportTask.pwaScoreMobile * 100 | number: '1.0-0'}}</span>
        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <button class="nopaddingleft" (click)="toggleShowUrls()">
          <mat-card-subtitle class="flextitle purple bold">
            Test Urls
            <span class="spacer"></span>
            <mat-icon *ngIf="!showUrls">keyboard_arrow_down</mat-icon>
            <mat-icon *ngIf="showUrls">keyboard_arrow_up</mat-icon>
          </mat-card-subtitle>
        </button>
        <mat-list dense *ngIf="showUrls">
          <mat-list-item *ngFor="let url of reportTask.urlList">{{url}}</mat-list-item>
        </mat-list>
      </mat-card-content>
      <mat-card-content>
        <button class="nopaddingleft" (click)="toggleShowRuns()">
          <mat-card-subtitle class="flextitle purple bold">
            Report Task Runs:
            <span class="spacer"></span>
            <mat-icon *ngIf="!showRuns">keyboard_arrow_down</mat-icon>
            <mat-icon *ngIf="showRuns">keyboard_arrow_up</mat-icon>
          </mat-card-subtitle>
        </button>
        <lha-app-report-task-run-list [reportTaskId]="reportTask._id" [reportTaskRunList]="reportTaskRunList" *ngIf="showRuns"></lha-app-report-task-run-list>
      </mat-card-content>
    </mat-card>
  </div>
</div>

