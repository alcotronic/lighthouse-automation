<div class="task-container">
  <div *ngIf="task && task !== undefined">
    <mat-card>
      <mat-card-title class="purple bold">
        <span style="color: white;">Task: </span>{{ task.name }}
      </mat-card-title>
      <mat-card-header>
        <mat-card-subtitle>
          <span style="color: cyan">Id: </span>{{ task.id }} |
          <span style="color: cyan">Type: </span>{{ task.taskType }} |
          <span *ngIf="task.taskInterval"
            ><span style="color: cyan">Interval: </span
            >{{ task.taskInterval }} |
          </span>
          <span style="color: cyan">Enabled: </span>{{ task.enabled }}
        </mat-card-subtitle>
      </mat-card-header>
    </mat-card>

    <mat-card>
      <mat-card-header>
        <div *ngIf="task" style="display: block; height: 250px">
          <canvas
            style="height: 250px"
            baseChart
            [datasets]="barChartData"
            [labels]="barChartLabels"
            [options]="barChartOptions"
            [legend]="barChartLegend"
            [type]="barChartType"
          ></canvas>
        </div>
      </mat-card-header>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <mat-card-subtitle class="purple bold"
          >Desktop averege</mat-card-subtitle
        >
      </mat-card-content>
      <mat-card-header>
        <mat-card-subtitle>
          <span *ngIf="task.performanceScoreDesktop"
            ><span style="color: cyan">Performance: </span
            >{{ task.performanceScoreDesktop * 100 | number : '1.0-0' }} |
          </span>
          <span *ngIf="task.accessibilityScoreDesktop"
            ><span style="color: cyan">Accessibility: </span
            >{{ task.accessibilityScoreDesktop * 100 | number : '1.0-0' }} |
          </span>
          <span *ngIf="task.bestPracticeScoreDesktop"
            ><span style="color: cyan">Best Practice: </span
            >{{ task.bestPracticeScoreDesktop * 100 | number : '1.0-0' }} |
          </span>
          <span *ngIf="task.seoScoreDesktop"
            ><span style="color: cyan">SEO: </span
            >{{ task.seoScoreDesktop * 100 | number : '1.0-0' }} |
          </span>
          <span *ngIf="task.pwaScoreDesktop"
            ><span style="color: cyan">PWA: </span
            >{{ task.pwaScoreDesktop * 100 | number : '1.0-0' }}</span
          >
        </mat-card-subtitle>
      </mat-card-header>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <mat-card-subtitle class="purple bold"
          >Mobile averege</mat-card-subtitle
        >
      </mat-card-content>
      <mat-card-header>
        <mat-card-subtitle>
          <span *ngIf="task.performanceScoreMobile"
            ><span style="color: cyan">Performance: </span
            >{{ task.performanceScoreMobile * 100 | number : '1.0-0' }} |
          </span>
          <span *ngIf="task.accessibilityScoreMobile"
            ><span style="color: cyan">Accessibility: </span
            >{{ task.accessibilityScoreMobile * 100 | number : '1.0-0' }} |
          </span>
          <span *ngIf="task.bestPracticeScoreMobile"
            ><span style="color: cyan">Best Practice: </span
            >{{ task.bestPracticeScoreMobile * 100 | number : '1.0-0' }} |
          </span>
          <span *ngIf="task.seoScoreMobile"
            ><span style="color: cyan">SEO: </span
            >{{ task.seoScoreMobile * 100 | number : '1.0-0' }} |
          </span>
          <span *ngIf="task.pwaScoreMobile"
            ><span style="color: cyan">PWA: </span
            >{{ task.pwaScoreMobile * 100 | number : '1.0-0' }}</span
          >
        </mat-card-subtitle>
      </mat-card-header>
    </mat-card>

    <mat-expansion-panel (opened)="showUrls = true" (closed)="showUrls = false">
      <mat-expansion-panel-header>
        <mat-panel-title>Test Urls</mat-panel-title>
      </mat-expansion-panel-header>
      <mat-list dense>
        <mat-list-item *ngFor="let url of task.urlList">{{
          url
        }}</mat-list-item>
      </mat-list>
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="showRuns = true" (closed)="showRuns = false">
      <mat-expansion-panel-header>
        <mat-panel-title>Task Executions</mat-panel-title>
      </mat-expansion-panel-header>
      <lha-frontend-feature-task-execution-list
        [task]="task"
      ></lha-frontend-feature-task-execution-list>
    </mat-expansion-panel>
  </div>
</div>
