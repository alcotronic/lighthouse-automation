<div class="report-task-run-container">
  <div *ngIf="!!task && task !== undefined && !!taskExecution && taskExecution !== undefined">
    <mat-card>
      <mat-card-title class="purple bold">
        <span style="color: white;">Task: </span>{{task.name}}
      </mat-card-title>
      <mat-card-header>
        <mat-card-subtitle>
          <span style="color:cyan;">Id: </span>{{task._id}} |
          <span style="color:cyan;">Type: </span>{{task.taskType}} |
          <span *ngIf="task.taskInterval"><span style="color:cyan;">Interval: </span>{{task.taskInterval}} | </span>
          <span style="color:cyan;">Enabled: </span>{{task.enabled}}
        </mat-card-subtitle>
      </mat-card-header>
    </mat-card>
    <mat-card>
      <mat-card-header>
        <mat-card-subtitle class="purple bold">Task Execution</mat-card-subtitle>
        <mat-card-subtitle>
          <span><span style="color:cyan;">Id: </span>{{taskExecution._id}} | </span>
          <span style="color:cyan;">Date: </span>{{taskExecution.timestamp | date:'medium':'+0100':'de'}}
        </mat-card-subtitle>
      </mat-card-header>
    </mat-card>
    <mat-card>
      <mat-card-header>
        <mat-card-subtitle class="purple bold">Desktop averege</mat-card-subtitle>
        <mat-card-subtitle>
          <span *ngIf="taskExecution.performanceScoreDesktop"><span style="color:cyan;">Performance: </span>{{taskExecution.performanceScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskExecution.accessibilityScoreDesktop"><span style="color:cyan;">Accessibility: </span>{{taskExecution.accessibilityScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskExecution.bestPracticeScoreDesktop"><span style="color:cyan;">Best Practice: </span>{{taskExecution.bestPracticeScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskExecution.seoScoreDesktop"><span style="color:cyan;">SEO: </span>{{taskExecution.seoScoreDesktop * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskExecution.pwaScoreDesktop"><span style="color:cyan;">PWA: </span>{{taskExecution.pwaScoreDesktop * 100 | number: '1.0-0'}}</span>
        </mat-card-subtitle>
      </mat-card-header>
    </mat-card>

    <mat-card>
      <mat-card-header>
        <mat-card-subtitle class="purple bold">Mobile averege</mat-card-subtitle>
        <mat-card-subtitle>
          <span *ngIf="taskExecution.performanceScoreMobile"><span style="color:cyan;">Performance: </span>{{taskExecution.performanceScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskExecution.accessibilityScoreMobile"><span style="color:cyan;">Accessibility: </span>{{taskExecution.accessibilityScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskExecution.bestPracticeScoreMobile"><span style="color:cyan;">Best Practice: </span>{{taskExecution.bestPracticeScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskExecution.seoScoreMobile"><span style="color:cyan;">SEO: </span>{{taskExecution.seoScoreMobile * 100 | number: '1.0-0'}} | </span>
          <span *ngIf="taskExecution.pwaScoreMobile"><span style="color:cyan;">PWA: </span>{{taskExecution.pwaScoreMobile * 100 | number: '1.0-0'}}</span>
        </mat-card-subtitle>
      </mat-card-header>
    </mat-card>

    <mat-expansion-panel (opened)="showUrls = true" (closed)="showUrls = false">
      <mat-expansion-panel-header>
        <mat-panel-title>Test Urls</mat-panel-title>
      </mat-expansion-panel-header>
      <mat-list dense>
        <mat-list-item *ngFor="let url of task.urlList">{{url}}</mat-list-item>
      </mat-list>
    </mat-expansion-panel>

    <mat-expansion-panel (opened)="showReports = true" (closed)="showReports = false">
      <mat-expansion-panel-header>
        <mat-panel-title>Reports</mat-panel-title>
      </mat-expansion-panel-header>
      <lha-frontend-feature-report-list [taskExecutionId]="taskExecution._id"></lha-frontend-feature-report-list>
    </mat-expansion-panel>
  </div>
</div>
